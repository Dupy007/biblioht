import{_ as m,o as i,c as a,a as e,F as l,r as n,t as h,d as y,b as p,i as _}from"./app-7be19962.js";const g={name:"update-pyramid",data(){return{pyramid:{user_id:"",category_id:"",expire_at:"",_method:"patch"},users:[],categories:[],errors:[]}},mounted(){this.showpyramid(),this.getUsers(),this.getCategories()},methods:{async showpyramid(){await axios.get("/plf/pyramid/"+this.$route.params.id).then(s=>{const{user_id:t,category_id:d,expire_at:c}=s.data;this.pyramid.user_id=t,this.pyramid.category_id=d,this.pyramid.expire_at=c}).catch(s=>{console.log(s)})},async update(){await axios.post("/plf/pyramid/"+this.$route.params.id,this.pyramid).then(s=>{this.$router.push({name:"pyramidList"})}).catch(s=>{var t=[];t=s.response.data.errors;for(const d in t)if(Object.hasOwnProperty.call(t,d)){const c=t[d];this.errors.push(c[0])}console.log(s)})},async getUsers(){await axios.get("/plf/user").then(s=>{this.users=s.data}).catch(s=>{console.log(s),this.users=[]})},async getCategories(){await axios.get("/plf/category").then(s=>{this.categories=s.data}).catch(s=>{console.log(s),this.categories=[]})},checkForm:function(s){this.pyramid.user_id&&this.pyramid.category_id&&this.update(),this.errors=[],this.pyramid.user_id||this.errors.push("User required."),this.pyramid.category_id||this.errors.push("Category required."),s.preventDefault()}}},f={class:"row"},v={class:"col-12"},b={class:"card"},w=e("div",{class:"card-header"},[e("h4",null,"Update Pyramid")],-1),x={class:"card-body"},U={class:"row"},k={key:0},C=e("b",null,"Please correct the following error(s):",-1),F={class:"col-12 mb-2"},V={class:"form-group"},B=e("label",null,"User",-1),D=["value"],P={class:"col-12 mb-2"},S={class:"form-group"},q=e("label",null,"Category",-1),E=["value"],L=e("div",{class:"col-12 mb-2"},[e("button",{type:"submit",class:"btn btn-primary"},"Update")],-1);function N(s,t,d,c,o,u){return i(),a("div",f,[e("div",v,[e("div",b,[w,e("div",x,[e("form",{onSubmit:t[2]||(t[2]=(...r)=>u.checkForm&&u.checkForm(...r))},[e("div",U,[o.errors.length?(i(),a("p",k,[C,e("ul",null,[(i(!0),a(l,null,n(o.errors,r=>(i(),a("li",null,h(r),1))),256))])])):y("",!0),e("div",F,[e("div",V,[B,p(e("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=r=>o.pyramid.user_id=r)},[(i(!0),a(l,null,n(o.users,r=>(i(),a("option",{value:r.id},h(r.name),9,D))),256))],512),[[_,o.pyramid.user_id]])])]),e("div",P,[e("div",S,[q,p(e("select",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=r=>o.pyramid.category_id=r)},[(i(!0),a(l,null,n(o.categories,r=>(i(),a("option",{value:r.id},h(r.name),9,E))),256))],512),[[_,o.pyramid.category_id]])])]),L])],32)])])])])}const j=m(g,[["render",N]]);export{j as default};
