import{_ as p,o as i,c as a,a as e,F as d,r as l,t as n,d as y,b as _,i as m}from"./app-7be19962.js";const g={name:"add-pyramid",data(){return{pyramid:{user_id:"",category_id:"",expire_at:""},users:[],categories:[],errors:[]}},mounted(){this.getUsers(),this.getCategories()},methods:{async getUsers(){await axios.get("/plf/user").then(s=>{this.users=s.data}).catch(s=>{console.log(s),this.users=[]})},async getCategories(){await axios.get("/plf/category").then(s=>{this.categories=s.data}).catch(s=>{console.log(s),this.categories=[]})},async create(){await axios.post("/plf/pyramid",this.pyramid).then(s=>{this.$router.push({name:"pyramidList"})}).catch(s=>{var t=[];t=s.response.data.errors;for(const c in t)if(Object.hasOwnProperty.call(t,c)){const u=t[c];this.errors.push(u[0])}console.log("error =>",s)})},checkForm:function(s){this.pyramid.user_id&&this.pyramid.category_id&&this.create(),this.errors=[],this.pyramid.user_id||this.errors.push("User required."),this.pyramid.category_id||this.errors.push("Category required."),s.preventDefault()}}},f={class:"row"},v={class:"col-12"},b={class:"card"},w=e("div",{class:"card-header"},[e("h4",null,"Add Pyramid")],-1),k={class:"card-body"},x={class:"row"},U={key:0},C=e("b",null,"Please correct the following error(s):",-1),F={class:"col-12 mb-2"},S={class:"form-group"},V=e("label",null,"User",-1),B=["value"],D={class:"col-12 mb-2"},P={class:"form-group"},q=e("label",null,"Category",-1),A=["value"],L=e("div",{class:"col-12 mb-2"},[e("button",{type:"submit",class:"btn btn-primary"},"Save")],-1);function N(s,t,c,u,o,h){return i(),a("div",f,[e("div",v,[e("div",b,[w,e("div",k,[e("form",{onSubmit:t[2]||(t[2]=(...r)=>h.checkForm&&h.checkForm(...r))},[e("div",x,[o.errors.length?(i(),a("p",U,[C,e("ul",null,[(i(!0),a(d,null,l(o.errors,r=>(i(),a("li",null,n(r),1))),256))])])):y("",!0),e("div",F,[e("div",S,[V,_(e("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=r=>o.pyramid.user_id=r)},[(i(!0),a(d,null,l(o.users,r=>(i(),a("option",{value:r.id},n(r.name),9,B))),256))],512),[[m,o.pyramid.user_id]])])]),e("div",D,[e("div",P,[q,_(e("select",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=r=>o.pyramid.category_id=r)},[(i(!0),a(d,null,l(o.categories,r=>(i(),a("option",{value:r.id},n(r.name),9,A))),256))],512),[[m,o.pyramid.category_id]])])]),L])],32)])])])])}const j=p(g,[["render",N]]);export{j as default};
